# 木易养数据中台系统需求文档

| 任务名称                                                   | MYY-4 PRD-数据中台需求    | 
|--------------------------------------------------------|---------------------|
| 提交作者<input type="checkbox" class="rowselector hidden"> | gsq                 | 
| 提交时间<input type="checkbox" class="rowselector hidden"> | 2024-08-13          | 
| 版本号                                                    | V0.1                | 
| 依赖版本<input type="checkbox" class="rowselector hidden"> | 无                   | 
| 文件名                                                    | cdp_overview.md<br> | 

# 一、概述

开发一个物联网数据中台，主要用于处理和管理园林植物（如罗汉松）的监测数据和自动化控制。
该平台将为面向B端商家（园区苗木管理）和C端用户（家庭庭院景观树管理）的应用开发提供支持。
同时提供数据产品，面向数据分析师和AI算法工程师，提供数据分析和预测功能。

# 二、用户使用旅程

1. 目标用户
	- 数据应用开发者：小程序工程师、Web前端工程师
	- 数据分析师：数据分析师、数据挖掘工程师
	- AI算法工程师：机器学习工程师、深度学习工程师
	- 系统管理员：运维工程师、系统工程师

2. 下游用户
	- B端用户：园林苗木种植和销售商
	- C端用户：拥有庭院景观树的家庭用户

# 三、相关页面

- 登录页面：用户登录数据中台系统，输入用户名和密码。
- 数据展示页面：用户可以查看设备的实时数据。
- 设备控制页面：用户可以对设备进行远程控制。

# 四、功能详细描述

## 数据中台模块

- 本模块的作用是接收来自阿里云IoT平台的设备数据，存储和处理数据，并提供数据查询和设备控制的API接口。

### 数据采集功能

- 功能描述：从阿里云IoT平台通过AMQP队列接收设备数据。
- 使用步骤：用户配置一个阿里云IoT平台的实例，并配置AMQP队列。数据中台模块从AMQP队列接收设备数据，并存储到数据库中。
- 功能点：
	1. 支持JSON协议数据格式。
	2. 支持多种设备类型，包括传感器、执行器、控制器等。
	3. 可横向扩展，多节点部署，设计tps、带宽等指标。
	4. 具备高可用性，支持数据备份和容灾。
- 异常情况及处理：无。
- 涉及字段：设备元数据、数据类型、数据内容、数据时间戳

## 简易交互模块

- 本模块的作用是展示物联网设备的数据并提供对设备的控制功能。

### 数据展示功能

- 功能描述：展示物联网设备的实时数据。
- 使用步骤：用户打开数据展示页面，即可实时查看设备的数据。
- 功能点：
	1. 实时展示设备的温度、湿度等数据。
	2. 支持数据图表展示，方便用户分析设备数据的趋势。
- 异常情况及处理：无。
- 涉及字段：设备ID、温度、湿度等传感器数据，展示页面需要根据设备类型和数据类型进行定制。

### 设备控制功能

- 功能描述：对物联网设备进行远程控制。
- 使用步骤：用户打开设备控制页面，选择要控制的设备和相应的操作，点击确认后即可进行设备控制。
- 功能点：
	1. 支持对设备的开关、调节等操作。
	2. 提供设备状态的实时反馈，方便用户确认操作结果。
- 异常情况及处理：无。
- 涉及字段：设备ID、操作类型、操作参数、操作时间

# 五、技术架构

- 后端开发语言：Python（待定）
- 部署环境：阿里云
- 数据库：阿里云RDS / InfluxDB
- 缓存：Redis 阿里云Redis
- 消息队列：AMQP
- API接口：RESTful（待定）
- 前端技术栈：Nuxt、Next.js等全栈框架，或Vue、React等纯前端框架

# 六、性能需求

- 初期500棵树的数据处理：支持初期500棵树的数据处理
- 数据上报频率：常规5-10分钟/次，实时模式5秒/次。
- 系统应具备横向扩展能力，以应对未来可能的规模扩大：设计应考虑未来可能增加的传感器类型和数据类型，系统架构应支持水平扩展，以应对数据量和用户量的增长。

# 七、安全性

- 遵循普通的数据安全和隐私保护标准。
- 实现基本的用户认证和授权机制，确保数据安全。

# 八、项目限制

- 预算：3000元以下
- 开发周期：1个月

# 九、验收标准

- 成功接收和存储来自500棵树（模拟）的传感器数据
- API能够正常响应数据查询和设备控制请求
- 系统能够在指定的预算内在阿里云上成功部署和运行

# 十、风险评估

- 开发时间紧张，可能需要优先实现核心功能
- 预算限制可能影响系统的某些性能或功能实现
- 技术路线不确定，可能需要更多的实践经验和反馈，并多次重构设计



